version: '3.8'

volumes:
    prometheus_data: {}

services:
  prometheus:
    image: prom/prometheus
    volumes:
    - './prometheus/:/etc/prometheus'
    - 'prometheus_data:/prometheus'
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/usr/share/prometheus/console_libraries'
      - '--web.console.templates=/usr/share/prometheus/consoles'
    ports:
    - 9090:9090
    restart: always


  exporter_1:
    build:
      context: exporter
    image: exporter
    environment:
      RAND_SEED: 1

  exporter_2:
    build:
      context: exporter
    image: exporter
    environment:
      RAND_SEED: 2

  exporter_3:
    build:
      context: exporter
    image: exporter
    environment:
      RAND_SEED: 3